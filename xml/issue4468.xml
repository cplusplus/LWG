<?xml version='1.0' encoding='utf-8' standalone='no'?>
<!DOCTYPE issue SYSTEM "lwg-issue.dtd">

<issue num="4468" status="New">
<title>&sect;[const.wrap.class] "`operator decltype(auto)`" is ill-formed</title>
<section><sref ref="[const.wrap.class]"/></section>
<submitter>Jiang An</submitter>
<date>07 Nov 2025</date>
<priority>99</priority>

<discussion>
<p>
Following the approval of <a href="https://wg21.link/cwg1670">CWG 1670</a> in Kona 2025, the 
following declaration in class template `constant_wrapper`, <sref ref="[const.wrap.class]"/>, 
is ill-formed:
</p>
<blockquote><pre>
constexpr operator decltype(auto)() const noexcept { return value; }
</pre></blockquote>
</discussion>

<resolution>
<p>
This wording is relative to <paper num="N5014"/>.
</p>

<ol>
<li><p>Modify <sref ref="[const.wrap.class]"/>, class template `constant_wrapper` synopsis, as indicated:</p>

<blockquote>
<pre>
[&hellip;]
template&lt;<i>cw-fixed-value</i> X, class>
struct constant_wrapper : <i>cw-operators</i> {
  static constexpr const auto &amp; value = X.<i>data</i>;

  using type = constant_wrapper;
  using value_type = typename decltype(X)::<i>type</i>;

  [&hellip;]
  constexpr operator decltype(<del>auto</del><ins>value</ins>)() const noexcept { return value; }
};
</pre>
</blockquote>
</li>
</ol>

</resolution>

</issue>
