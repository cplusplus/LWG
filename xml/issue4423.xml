<?xml version='1.0' encoding='utf-8' standalone='no'?>
<!DOCTYPE issue SYSTEM "lwg-issue.dtd">

<issue num="4423" status="Voting">
<title>`meta::data_member_spec` allows negative bit-field widths</title>
<section><sref ref="[meta.reflection.define.aggregate]"/></section>
<submitter>Jakub Jelinek</submitter>
<date>20 Oct 2025</date>
<priority>99</priority>

<discussion>
<p>
The `meta::data_member_spec` function doesn't restrict `options.bit_width`
to be non-negative.
</p>

<note>2025-10-24; LWG telecon; Status changed: New &rarr; Ready.</note>
<p>
Poll to move issue to Ready: 10/0/0
</p>
</discussion>

<resolution>
<p>
This wording is relative to <paper num="N5014"/>.
</p>

<ol>

<li><p>Modify <sref ref="[meta.reflection.define.aggregate]"/> as indicated:</p>

<blockquote>
<ul>
<li>(5.3) &mdash;
if `options.name` does not contain a value, then `options.bit_width`
contains a value;
</li>
<li>(5.4) &mdash;
if `options.bit_width` contains a value <i>V</i>, then
<ul>
<li>(5.4.1) &mdash;
`is_integral_type(type) || is_enum_type(type)` is `true`,
</li>
<li>(5.4.2) &mdash;
`options.alignment` does not contain a value,
</li>
<li>(5.4.3) &mdash;
`options.no_unique_address` is `false`, <del>and</del>
</li>
<li><ins>(5.4.?) &mdash;
<i>V</i> is not negative, and</ins>
</li>
<li>(5.4.4) &mdash;
if <i>V</i> equals `0`, then `options.name` does not contain a value; and
</li>
</ul>
</li>
<li>(5.5) &mdash;
if `options.alignment` contains a value, it is an alignment value
(<sref ref="[basic.align]"/>) not less than `alignment_of(type)`.
</li>
</ul>
</blockquote>
</li>
</ol>
</resolution>

</issue>
